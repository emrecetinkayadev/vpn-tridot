# Backend service environment
APP_NAME=vpn-backend
APP_ENV=production
APP_VERSION=1.0.0

HTTP_ADDR=:8080
HTTP_READ_TIMEOUT=5s
HTTP_WRITE_TIMEOUT=10s
HTTP_SHUTDOWN_TIMEOUT=15s

LOG_LEVEL=info
LOG_REQUESTS_ENABLED=true
LOG_REQUEST_HEADERS=x-request-id,authorization
LOG_MASK_HEADERS=authorization,proxy-authorization,x-api-key,cookie,set-cookie
LOG_REQUEST_QUERY_PARAMS=token
LOG_MASK_QUERY_PARAMS=token,auth,code,password

CORS_ENABLED=true
CORS_ALLOWED_ORIGINS=https://app.example.com
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Authorization,Content-Type,X-CSRF-Token
CORS_EXPOSE_HEADERS=Link
CORS_ALLOW_CREDENTIALS=false
CORS_MAX_AGE=10m

CSRF_ENABLED=true
CSRF_ALLOWED_ORIGINS=https://app.example.com
CSRF_PROTECTED_METHODS=POST,PUT,PATCH,DELETE
CSRF_ALLOW_NO_ORIGIN=false

METRICS_ENABLED=true
METRICS_PATH=/metrics
METRICS_NAMESPACE=vpn_backend
METRICS_SUBSYSTEM=http

RATE_LIMIT_RPS=20
RATE_LIMIT_BURST=40
RATE_LIMIT_AUTH_ENABLED=true
RATE_LIMIT_AUTH_RPS=10
RATE_LIMIT_AUTH_BURST=20
RATE_LIMIT_CHECKOUT_ENABLED=true
RATE_LIMIT_CHECKOUT_RPS=5
RATE_LIMIT_CHECKOUT_BURST=10
RATE_LIMIT_PEERS_ENABLED=true
RATE_LIMIT_PEERS_RPS=8
RATE_LIMIT_PEERS_BURST=16

POSTGRES_DSN=postgres://vpn_user:change-me@postgres:5432/vpn_prod?sslmode=require
DB_MAX_OPEN_CONNS=20
DB_MAX_IDLE_CONNS=10
DB_CONN_MAX_LIFETIME=1h

JWT_SECRET=replace-with-prod-secret
JWT_ACCESS_TTL=15m
JWT_REFRESH_TTL=720h
AUTH_VERIFICATION_TTL=24h
AUTH_PASSWORD_RESET_TTL=1h

ARGON_MEMORY=65536
ARGON_ITERATIONS=3
ARGON_PARALLELISM=2
ARGON_SALT_LENGTH=16
ARGON_KEY_LENGTH=32

TOTP_ISSUER=VPN-MVP
TOTP_SECRET_LENGTH=32
TOTP_DIGITS=6
TOTP_PERIOD_SECONDS=30

BILLING_DEFAULT_CURRENCY=TRY
STRIPE_SECRET=sk_live_replace_me
STRIPE_WEBHOOK_SECRET=whsec_replace_me
STRIPE_SUCCESS_URL=https://app.example.com/billing/success
STRIPE_CANCEL_URL=https://app.example.com/billing/cancel

IYZICO_API_KEY=replace-with-iyzico-api-key
IYZICO_SECRET_KEY=replace-with-iyzico-secret
IYZICO_BASE_URL=https://api.iyzipay.com

NODE_PROVISION_TOKEN=replace-with-provision-token

HCAPTCHA_ENABLED=true
HCAPTCHA_SECRET=replace-with-hcaptcha-secret
HCAPTCHA_SITEKEY=replace-with-hcaptcha-sitekey
HCAPTCHA_SCORE_THRESHOLD=0.5
HCAPTCHA_ENDPOINT=https://hcaptcha.com/siteverify

SOPS_SECRETS_ENABLED=true
SOPS_SECRETS_PATH=/run/secrets/backend.json
SOPS_SECRETS_FORMAT=json

VAULT_ENABLED=false
VAULT_ADDR=https://vault.internal.example.com
VAULT_TOKEN=
VAULT_PATH=kv/data/vpn-backend/prod
VAULT_NAMESPACE=
VAULT_TIMEOUT=5s
VAULT_TLS_SKIP_VERIFY=false
